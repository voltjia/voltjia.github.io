# 求和

现在我们掌握了一部分简单的输入和输出方式，也实现了一些有意思的小程序，比如打印 `Hello, World!`，但是还没有写出来能够真的体现计算机能力的程序。先不说体现计算机的能力，最起码是不是得体现出计算器的能力？那计算器能干啥呢？最简单的，可以进行加减乘除，比如我们可以求一些数字的和。那么对用户输入的数字进行求和的一个程序，该怎么写呢？咱们一步一步来看。

## 两数之和

```C
#include <stdio.h>

int main() {
    int a = 1;
    int b = 1;
    printf("1 + 1 = %d\n", a + b);
    return 0;
}
```

还记得这个能打印 `1 + 1 = 2` 的程序吧，我们就在它的基础上一步一步来修改。这个程序已经颇具雏形，我们甚至已经声明了整型变量 `a` 和 `b`，只不过它们被初始化成了 `1`。如果结合刚刚讲过的 `scanf`，我们是不是可以让用户来为他们输入值，而不是我们自己来规定？

```C
#include <stdio.h>

int main() {
    int a;
    scanf("%d", &a);
    int b;
    scanf("%d", &b);
    printf("%d + %d = %d\n", a, b, a + b);
    return 0;
}
```

因为我们使用 `scanf`，所以初始化就没必要了，毕竟不管我们初始化成啥，马上也要被重新换成用户的输入了。同时，我们也更换了 `printf` 里的输入，把格式化字符串里的两个 `1` 都换成了占位符 `%d`，同时在后面按顺序写上了 `a` 和 `b`，这样就不会总打印 `1 + 1 = ?`，而是会根据输入变化，比如我们输入 `4` 和 `7`，就会输出 `4 + 7 = 11`。

```
4
7
4 + 7 = 11
```

## 多数之和

很好，现在我们已经能够求出两个数字的和，但是如果，我们想求若干个数的和怎么办？我们先不给出代码，大家先想象一下，假设你是一个无情的求和机器，我是用户，我就想要一个一个数字的告诉你，然后听你说出它们的和，你需要什么呢？是不是需要一个结束的标志，比如“就这些”、“好了”、“没了”，这样你才能知道该结束了对吧。那往简单想的话，我每说出一句话，你就判断一下，我说的是不是数字，如果不是数字就算是结束，是不是就行了？没错，我们就可以按照这个思路写出如下代码。

```C
#include <stdio.h>

int main() {
    int sum = 0;
    int num;
    while (scanf("%d", &num)) {
        sum += num;
    }
    printf("%d\n", sum);
    return 0;
}
```

这次我们引入了一个新的盒子 `while`，在 C 语言当中，一个 `while` 盒子由 `2` 部分组成，括号里面的可以当作是条件，后面跟着的可以当作是内容，`while` 的功能是：如果括号里的条件是被满足的，那么就会执行后面跟着的内容，并且执行过后又会再次回到条件判断，再满足就再执行，以此类推，直到条件不被满足为止，所以一个 `while` 盒子也被称之为 `while` 循环。有的读者就问了，你说的这些我都能理解，就是它会根据某个条件一直重复做一件事，直到这个条件不被满足，那问题来了，为啥 `scanf("%d", &num)` 是个条件？那啥叫满足，啥叫不满足？很好，我们首先来讲啥叫满足，在计算机当中，一切都是由数据来决定的，那么满足不满足，自然也一样，所以我们需要人为规定一个满足的情况，于是便有了，`0` 表示不满足，其它表示满足这样一种设定（先别管这么设定的原因，想记住的的话就是 `0` 代表啥也没有，所以啥也满足不了就行）。放到 `while` 这里就是，如果括号里面的不能等同于 `0`，那他就一直循环，遇到 `0` 就停。那么为什么 `scanf` 这个盒子可以当作条件呢？因为关于它有一个隐藏信息没有告诉大家，那就是其实 `scanf` 是有输出的，这种输出与之前说的打印不同，它不是显示出什么东西给我们看，而是在计算机内部，可以被别的语言部分看到的东西，这种东西我们称之为返回值。而 `scanf` 的返回值，就是它成功扫描的东西的数量，比如你输入了 `123`，恰好对应了 `%d`，这就是成功了，它就会返回 `1`，但如果你输入的是 `Hello!`，并不对应 `%s`，那就是失败了，它就会返回 `0`。而这个返回的值被 `while` 看到，就会决定程序的走向。

了解了这些再回过头来看程序就会简单很多，我们先初始化了一个变量 `sum` 为 `0`，再声明了一个变量 `num` 来容纳我们每次输入的整数。`while` 会通过 `scanf` 的返回值来判断，我们输入的是不是整数，如果是整数，这个整数就已经被 `scanf` 放入了 `num` 里面，那我们就会执行 `{ sum += num; }`（先理解成给 `sum` 加 `num`），来一步一步地求和我们的输入，而如果我们输入的不是整数，那么 `while` 就会结束，而我们也就会打印出最终的结果 `sum`。所以说，你可以先输入任意数量的整数，最后随便输入一个什么不是整数的东西，比如 `stop`，这样就可以看到那些整数的和啦，就像下面这样。

```
1 2 3 stop
6
```

但是现在，我们只支持多个整数之和，如果我们想要求多个实数之和呢？大家还记得之前提到的占位符 `%f` 吧，我们曾经用它打印过小数结果出来，我们也可以用它来读取小数。

```C
#include <stdio.h>

int main() {
    float sum = 0;
    float num;
    while (scanf("%f", &num)) {
        sum += num;
    }
    printf("%f\n", sum);
    return 0;
}
```

把 `%d` 替换成 `%f`，并且把 `int` 替换成 `float`，就算是初步完成啦。其中 `float` 是浮点数（floating-point）的意思，你先理解成，现实中的计算机很难完全表示实数这种数学概念，即便可以，运算也会相对缓慢，所以浮点数是用来表示实数的一种近似类型，虽然是近似的，但是也能满足很大一部分需求，却大大提升了运算速度。

```
3.14 1.41 2.72 stop
7.270000
```

如上所示，我们就可以输入一些小数，然后打印出它们的和啦。
